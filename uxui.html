<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Galería</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css" />
  <link rel="stylesheet" href="galeria.css" />
</head>

<body>
  <header class="galeria-header">
    <a href="index.html" class="volver">← Volver</a>
    <img src="img/uxuititle.png" alt="uxuititle" class="titleuxui">
  </header>

  <main class="uxui-gallery-container">
  <section class="uxui-gallery-grid">
    <div class="uxui-gallery-item" data-video="videos/kind.mp4">
      <img src="img/1.png" alt="Kind">
    </div>

    <div class="uxui-gallery-item" data-video="videos/alarma.mp4">
      <img src="img/2.png" alt="Alartec">
    </div>

    <div class="uxui-gallery-item" data-video="videos/platzi.mp4">
      <img src="img/3.png" alt="Platzi">
    </div>

    <div class="uxui-gallery-item" data-video="videos/Enco.mp4">
      <img src="img/4.png" alt="Enco">
    </div>

    <div class="uxui-gallery-item" data-video="videos/tickets.mp4">
      <img src="img/5.png" alt="Tickets">
    </div>

    <div class="uxui-gallery-item" data-video="videos/armonIA.mp4">
      <img src="img/6.png" alt="ArmonIA">
    </div>

    <div class="uxui-gallery-item" data-video="videos/soul.mp4">
      <img src="img/7.png" alt="Soul">
    </div>

    <div class="uxui-gallery-item" data-video="videos/menu.mp4">
      <img src="img/8 (2).png" alt="Menu">
    </div>
  </section>
</main>

<!-- Modal video -->
<div id="videoModal" class="video-modal" aria-hidden="true">
  <div class="video-modal-content" role="dialog" aria-modal="true">
    <button class="video-modal-close" aria-label="Cerrar">&times;</button>
    <video id="modalVideo" playsinline webkit-playsinline preload="metadata" controls></video>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const items = document.querySelectorAll('.uxui-gallery-item');
  const modal = document.getElementById('videoModal');
  const video = document.getElementById('modalVideo');
  const closeBtn = modal.querySelector('.video-modal-close');

  // Abrir modal y reproducir
  async function openModal(src) {
    video.pause();
    video.src = src;
    video.load();

    modal.style.display = 'flex';
    modal.setAttribute('aria-hidden', 'false');

    try {
      // Intentar fullscreen si está disponible
      if (video.requestFullscreen) await video.requestFullscreen();
      else if (video.webkitEnterFullscreen) video.webkitEnterFullscreen();
      else if (video.webkitRequestFullscreen) video.webkitRequestFullscreen();
    } catch (e) { /* ignore */ }

    // Reproducir automáticamente
    video.play().catch(err => console.warn("No se pudo reproducir:", err));
  }

  // Cerrar modal
  async function closeModal() {
    try {
      if (document.fullscreenElement) await document.exitFullscreen();
      if (document.webkitFullscreenElement) document.webkitExitFullscreen();
    } catch (e) { /* ignore */ }

    video.pause();
    video.removeAttribute('src');
    video.load();

    modal.style.display = 'none';
    modal.setAttribute('aria-hidden', 'true');
  }

  // Evento clic en imagen
  items.forEach(item => {
    item.addEventListener('click', () => {
      const src = item.dataset.video;
      if (src) openModal(src);
    });
  });

  // Botón cerrar
  closeBtn.addEventListener('click', closeModal);

  // Cerrar con click fuera del video
  modal.addEventListener('click', (e) => {
    if (e.target === modal) closeModal();
  });

  // Cerrar con ESC
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && modal.style.display === 'flex') closeModal();
  });
});
</script>


</body>

</html>
